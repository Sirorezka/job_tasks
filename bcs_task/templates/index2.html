<!DOCTYPE HTML>
<html>
<head>
    <title>WebSockets Example</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">
       $(document).ready(function(){

           var socket = io.connect('http://' + document.domain + ':' + location.port);

           socket.on('connect', function() {
               socket.emit('am up', {data: 'I\'m connected!'});
           });
           //listens to 'price update' message on socket
           socket.on('price update', function(msg) {
               // $('#price_info').append("sdf <br> dsf")
			   
			    var tbl=$("<table/>").attr("id","news_table");
				$("#news_table").text(tbl);
	
			   	//$('#news_table').text(msg);
				
				var obj_msg = JSON.parse(msg);

				for (var row_key in obj_msg) {
					$('#news_table').append("<tr>");
					for (var col_obj in obj_msg[row_key]){
						$('#news_table').append("<td>"+obj_msg[row_key][col_obj]+"</td> ");
					}
					$('#news_table').append("</tr>");
					}

			   $('#news_table').append(msg["0"]);

			//   $('#price_info').text("")
			//   for (var row_obj in msg) {
			//		$('#price_info').append(row_obj)
			//		$('#price_info').append("<br>")

			//   }
           });

       });
   </script>
</head>
<body>
  <div id="news_table"></div>
</body>
</html>